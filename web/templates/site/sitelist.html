{% import 'macro/oops.html' as OOPS %}
<div class="container-xl">
  <!-- Page title -->
  <div class="page-header d-print-none">
    <div class="row align-items-center">
      <div class="col">
        <h2 class="page-title">
          站点资源
        </h2>
      </div>
    </div>
  </div>
</div>
<!-- 业务页面代码 -->
{% if Count > 0 %}
  <div class="page-body">
    <div class="container-xl">
      <div class="d-grid gap-3 grid-info-card">
        {% for Site in Sites %}
        <a class="card card-link-pop"
           href='javascript:void(0)'
           onclick='open_site_resources(this, "{{ Site.id }}", "resources?site={{ Site.id }}&title={{ Site.name }}")'>
          <div class="card-body">
            <div class="row">
              <div class="col-auto">
                <span class="avatar rounded siteicon-{{ Site.name|hash }}"></span>
              </div>
              <div class="col">
                <div class="font-weight-medium">{{ Site.name }}</div>
                <div class="text-muted">{{ Site.domain }}</div>

              </div>
                <div class="col-auto">
                    <select id="resourceTypeSelect-{{ Site.id }}" class="form-select">
                        <option value="">综合</option>
                        <option value="adult">成人</option>
                    </select>
                </div>
            </div>
          </div>
        </a>
        {% endfor %}
      </div>
    </div>
  </div>
{% else %}
{{ OOPS.nodatafound('没有站点', '没有找到任何站点，请正确维护站点信息。') }}
{% endif %}
<script type="text/javascript">
    selects = document.querySelectorAll('.form-select');
    selects.forEach(function(select){
        select.addEventListener('click', function(event){
            event.stopPropagation();
        });
    });

    function open_site_resources(self,siteId, url) {
        var selectElement = document.getElementById('resourceTypeSelect-' + siteId);
        var selectedValue = selectElement.value;
        url = url + "&mode=" + selectedValue
    // $(self).addClass("card-inactive");
       console.info(selectedValue)
       navmenu(url);
  }
</script>