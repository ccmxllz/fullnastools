#!/bin/sh

PACKAGE_NAME="$SYNOPKG_PKGNAME"
PACKAGE_BASE="/var/packages/${PACKAGE_NAME}/target"
PACKAGE_SSS="/var/packages/${PACKAGE_NAME}/scripts/start-stop-status"

preinst ()
{
    exit 0
}

postinst ()
{
  chown -R root:root "${SYNOPKG_PKGDEST}"
  $PYTHON_BIN "${PACKAGE_BASE}"/get-pip.py
	$PYTHON_BIN -m pip install -r "${PACKAGE_BASE}"/requirements.txt
	echo "${PACKAGE_BASE}/" > /var/packages/py3k/target/usr/local/lib/python3.8/site-packages/nas-tools.pth
    
	exit 0
}

preuninst ()
{
    # 停用套件
    "${PACKAGE_SSS}" stop
    exit 0
}

postuninst ()
{

    exit 0
}

preupgrade ()
{
     # 停用套件
    "${PACKAGE_SSS}" stop
    exit 0
}

postupgrade ()
{
    chown -R root:root "${SYNOPKG_PKGDEST}"
    $PYTHON_BIN "${PACKAGE_BASE}"/get-pip.py
    $PYTHON_BIN -m pip install -r "${PACKAGE_BASE}"/requirements.txt
    echo "${PACKAGE_BASE}/" > /var/packages/py3k/target/usr/local/lib/python3.8/site-packages/nas-tools.pth
    exit 0
}